"use strict";

function _xmldom() {
  const data = require("@xmldom/xmldom");
  _xmldom = function () {
    return data;
  };
  return data;
}
// Flow doesn't define ProcessingInstruction by default.
module.exports = {
  'xml-stylesheet': (node, asset) => {
    const pseudo = new (_xmldom().DOMParser)().parseFromString(`<Ïˆ ${node.data} />`, 'application/xml');
    const input = pseudo.firstChild.getAttribute('href');
    const output = asset.addURLDependency(input, {
      priority: 'parallel'
    });
    pseudo.firstChild.setAttribute('href', output);
    node.data = new (_xmldom().XMLSerializer)().serializeToString(pseudo).slice(2, -2);
  }
};